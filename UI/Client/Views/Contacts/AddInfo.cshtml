@using Shared.Contracts.Enums
@{
    ViewData["Title"] = "Add Contact Info";
    var contactId = (Guid)ViewBag.ContactId;
    var enumValues = Enum.GetValues(typeof(ContactInfoType)).Cast<ContactInfoType>().ToList();
    var selectedType = ViewBag.SelectedInfoType as ContactInfoType?; // POST hatasında seçimi korumak için
}

<h2 class="mb-3">Add Info</h2>

<form asp-action="AddInfo" method="post" class="card">
  <div class="card-body">
    @Html.AntiForgeryToken()
    @Html.ValidationSummary(true, "", new { @class = "text-danger" })

    <!-- Hidden contactId -->
    <input type="hidden" name="ContactId" value="@contactId" />

    <div class="mb-3">
      <label class="form-label">Type</label>
            <select name="InfoType" class="form-select">
                <option value="" disabled selected hidden>Select type...</option>
                @foreach (var value in enumValues)
                {
                    if (selectedType.HasValue && selectedType.Value == value)
                    {
                        <option value="@((int)value)" selected="selected">@value</option>
                    }
                    else
                    {
                        <option value="@((int)value)">@value</option>
                    }
                }
            </select>
    </div>

    <div class="mb-3">
      <label class="form-label">Content</label>
      <input name="Content" class="form-control" placeholder="e.g., +90 5xx..., mail@example.com, Izmir/Türkiye" />
      <span class="text-danger">@Html.ValidationMessage("Content")</span>
    </div>
  </div>

  <div class="card-footer d-flex gap-2">
    <button type="submit" class="btn btn-success">Save</button>
    <a class="btn btn-outline-secondary" asp-action="Details" asp-route-id="@contactId">Cancel</a>
  </div>
</form>
